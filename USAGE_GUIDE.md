# QA Scheduling Tool MVP - 使用方法ガイド

## 目次

1. [はじめに](#1-はじめに)
2. [セットアップ](#2-セットアップ)
3. [基本的な使い方](#3-基本的な使い方)
4. [入力データの作成](#4-入力データの作成)
5. [サンプルデータの利用](#5-サンプルデータの利用)
6. [結果の見方](#6-結果の見方)
7. [応用テクニック](#7-応用テクニック)
8. [トラブルシューティング](#8-トラブルシューティング)

## 1. はじめに

QA Scheduling Tool MVPは、量子アニーリング（QA）シミュレーションを活用したスケジューリングツールです。このアプリケーションの主な特長は以下の通りです：

- コンテキストスイッチコストを最小化するスケジュールの生成
- タスク実行回数や同時割当などの基本的な制約の考慮
- シンプルなWebインターフェースによる操作性

このガイドでは、アプリケーションの基本的な使い方から高度な活用方法まで順を追って説明します。

## 2. セットアップ

### 必要環境

- Python 3.8以上
- インターネット接続（初回セットアップ時のみ必要）

### インストール手順

1. リポジトリをクローンまたはダウンロードします。
2. 環境構築スクリプトを実行します。

**Windowsの場合**：
```
setup_env.bat
```

**macOS/Linuxの場合**：
```
chmod +x setup_env.sh
./setup_env.sh
```

3. 環境構築が完了したら、アプリケーションを起動します。
```
streamlit run app.py
```

4. ブラウザが自動的に開き、アプリケーションのWebインターフェースが表示されます（通常は http://localhost:8501）。

## 3. 基本的な使い方

1. サイドバーの入力フォームにタスク情報と担当者情報を入力します。
2. タイムスロット数を指定します（デフォルトは5）。
3. 「スケジュール作成」ボタンをクリックして最適化を実行します。
4. 計算が完了すると、メイン画面にスケジュール結果がテーブル形式で表示されます。

## 4. 入力データの作成

### タスク入力

タスク入力は以下の形式で行います：
```
タスク名,タスク種類
```

- **タスク名**：各タスクの識別名（一意である必要があります）
- **タスク種類**：タスクのカテゴリ（同じ種類のタスクは連続して配置されやすくなります）

例：
```
要件分析,計画
DB設計,設計
UI設計,設計
コーディング,実装
単体テスト,テスト
```

### 担当者入力

担当者は1行に1人ずつ入力します：
```
田中
佐藤
鈴木
```

## 5. サンプルデータの利用

サンプルデータを使うと、アプリケーションの動作をすぐに確認できます：

1. サイドバーの「サンプルデータを選択」ドロップダウンからサンプルを選びます。
2. 「サンプルデータを読み込む」ボタンをクリックします。
3. 入力フォームに自動的にデータが入力されます。
4. 「スケジュール作成」ボタンをクリックして実行します。

利用可能なサンプルデータ：
- **small_case.txt**: 少数のタスクと担当者による基本的なケース
- **medium_case.txt**: より多くのタスクと担当者による実践的なケース
- **edge_case.txt**: タスク数がタイムスロット×担当者数を超えるケース
- **context_switch_case.txt**: コンテキストスイッチコストの効果を確認するためのケース

## 6. 結果の見方

スケジュール結果は表形式で表示されます：
- **行**：タイムスロット（1から始まる連番）
- **列**：担当者
- **セル**：割り当てられたタスク名（割り当てがない場合は空白）

結果の下部に表示される「エネルギー」値は最適化の品質を示します（低いほど良い解）。

全てのタスクが割り当てられていない場合は、警告メッセージが表示されます。これは通常、タスク数がタイムスロット×担当者数より多い場合に発生します。

## 7. 応用テクニック

### コンテキストスイッチコストの調整

コンテキストスイッチの重要度を変更するには、`qubo.py`の`build_qubo`関数で`penalty_switch`パラメータを調整します：
- 値を大きくする：同じタイプのタスクがより連続して配置されるようになります
- 値を小さくする：タスク種類の連続性よりも他の制約が優先されます

### 計算精度と速度のバランス

より良い解を得るためには、`solver.py`の`solve_qubo`関数で`num_reads`パラメータを増やします：
- デフォルト値は100
- 値を大きくする（例：500）とより良い解が見つかる可能性が高まりますが、計算時間も長くなります

### タスク分類の最適化

コンテキストスイッチコストの効果を最大化するためのヒント：
- タスク種類は明確に区別できるカテゴリに分類する
- 作業の性質が大きく異なるものを別種類とする（例：「会議」「コーディング」「文書作成」）
- 細かすぎる分類は避け、適度にグループ化する

## 8. トラブルシューティング

### 一般的な問題と解決策

| 問題 | 考えられる原因 | 解決策 |
|------|----------------|--------|
| アプリが起動しない | Python環境の問題 | `setup_env.bat`または`setup_env.sh`を再実行 |
| 入力エラーが表示される | 入力形式が不正 | タスク形式「名前,種類」を確認、重複を削除 |
| 計算が非常に遅い | 問題サイズが大きすぎる | タスク数・担当者数・スロット数のいずれかを減らす |
| メモリエラーが発生 | 問題サイズが大きすぎる | タスク数・担当者数・スロット数のいずれかを減らす |
| 全タスクが割り当てられない | タスク数 > スロット数×担当者数 | タイムスロットを増やすか、担当者を増やす |

詳細なログは`logs`ディレクトリに保存されています。問題解決に役立てることができます。

### さらなる支援が必要な場合

このガイドで解決しない問題がある場合は、以下を試してください：
- FAQドキュメント（FAQ.md）を参照する
- イシュートラッカーで類似の問題を検索する
- 新しいイシューを作成し、問題の詳細とログを共有する